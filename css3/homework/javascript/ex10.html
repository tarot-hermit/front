<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calendar_final.html</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    table { width: 100%; text-align: center; }
    th { background: #f1f1f1; }
    td { height: 70px; vertical-align: top; }
    .today { background: #ffe4e1; font-weight: bold; }
    .holiday,
    .holiday small { color: red !important; font-weight: bold; }
    .saturday,
    .saturday small { color: blue !important; font-weight: bold; }
  </style>
  <script>
    'use strict';
    let viewDate = new Date();
    const holidays = {
      "01-01": "ì‹ ì •",
      "03-01": "ì‚¼ì¼ì ˆ",
      "05-05": "ì–´ë¦°ì´ë‚ ",
      "06-06": "í˜„ì¶©ì¼",
      "08-15": "ê´‘ë³µì ˆ",
      "10-03": "ê°œì²œì ˆ",
      "10-09": "í•œê¸€ë‚ ",
      "12-25": "ì„±íƒ„ì ˆ"
    };
    let yyyyEl, mmEl, ddEl, demoEl;
    function yyyyCheck() {
      yyyyEl.innerHTML = '<option value="">ë…„ë„ì„ íƒ</option>';
      const currentYear = new Date().getFullYear();
      for (let i = currentYear + 100; i >= currentYear - 100; i--) {
        yyyyEl.innerHTML += `<option value="${i}">${i}ë…„</option>`;
      }
    }
    function mmCheck() {
      mmEl.innerHTML = '<option value="">ì›” ì„ íƒ</option>';
      for (let i = 1; i <= 12; i++) {
        mmEl.innerHTML += `<option value="${i}">${i}ì›”</option>`;
      }
    }
    function ddCheck() {
      ddEl.innerHTML = '<option value="">ì¼ ì„ íƒ</option>';
      if (!yyyyEl.value || !mmEl.value) return;
      const lastDate = new Date(Number(yyyyEl.value), Number(mmEl.value), 0).getDate();
      for (let i = 1; i <= lastDate; i++) {
        ddEl.innerHTML += `<option value="${i}">${i}ì¼</option>`;
      }
    }
    function dateCheck3() {
      if (!yyyyEl.value || !mmEl.value) {
        demoEl.innerHTML = 'ë…„ë„ì™€ ì›”ì„ ì„ íƒí•˜ì„¸ìš”.';
        return;
      }
      viewDate = new Date(Number(yyyyEl.value), Number(mmEl.value) - 1, 1);
      drawCalendar();
    }
    function drawCalendar() {
      const year = viewDate.getFullYear();
      const month = viewDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month + 1, 0).getDate();
      const today = new Date();
      let str = `
        <div class="d-flex justify-content-center align-items-center gap-2 mb-2">
          <button class="btn btn-sm btn-outline-primary" type="button" onclick="prevMonth()">â—€</button>
          <b>${year}ë…„ ${month + 1}ì›”</b>
          <button class="btn btn-sm btn-outline-primary" type="button" onclick="nextMonth()">â–¶</button>
        </div>
        <table class="table table-bordered">
          <tr>
            <th class="holiday">ì¼</th>
            <th>ì›”</th>
            <th>í™”</th>
            <th>ìˆ˜</th>
            <th>ëª©</th>
            <th>ê¸ˆ</th>
            <th class="saturday">í† </th>
          </tr>
          <tr>
      `;
      for (let i = 0; i < firstDay; i++) str += `<td></td>`;
      for (let d = 1; d <= lastDate; d++) {
        const curDate = new Date(year, month, d);
        const weekDay = curDate.getDay();
        let className = '';
        let label = '';
        if (
          year === today.getFullYear() &&
          month === today.getMonth() &&
          d === today.getDate()
        ) className += ' today';
        const key = String(month + 1).padStart(2,'0') + '-' + String(d).padStart(2,'0');
        if (holidays[key]) {
          className += ' holiday';
          label = `<br><small>${holidays[key]}</small>`;
        }
        if (weekDay === 0) className += ' holiday';
        if (weekDay === 6) className += ' saturday';
        str += `<td class="${className}">${d}${label}</td>`;
        if ((firstDay + d) % 7 === 0) str += `</tr><tr>`;
      }
      str += `</tr></table>`;
      demoEl.innerHTML = str;
      yyyyEl.value = year;
      mmEl.value = month + 1;
      ddCheck();
    }
    function prevMonth() {
      viewDate.setMonth(viewDate.getMonth() - 1);
      drawCalendar();
    }
    function nextMonth() {
      viewDate.setMonth(viewDate.getMonth() + 1);
      drawCalendar();
    }
    window.onload = () => {
      yyyyEl = document.getElementById('yyyy');
      mmEl = document.getElementById('mm');
      ddEl = document.getElementById('dd');
      demoEl = document.getElementById('demo');
      yyyyCheck();
      mmCheck();
      yyyyEl.value = viewDate.getFullYear();
      mmEl.value = viewDate.getMonth() + 1;
      ddCheck();
      drawCalendar();
      yyyyEl.addEventListener('change', ddCheck);
      mmEl.addEventListener('change', ddCheck);
    };
  </script>
</head>
<body>
  <div class="container mt-3">
    <h2>ğŸ“… ë‹¬ë ¥</h2>
    <form onsubmit="return false;">
      <select id="yyyy"></select> -
      <select id="mm"></select> -
      <select id="dd"></select>
      <input type="button" value="ë‹¬ë ¥ì¶œë ¥" onclick="dateCheck3()" class="btn btn-danger btn-sm"/>
    </form>
    <hr/>
    <div id="demo"></div>
  </div>
</body>
</html>
